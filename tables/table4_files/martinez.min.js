/**
 * martinez v0.7.1
 * Martinez polygon clipping algorithm, does boolean operation on polygons (multipolygons, polygons with holes etc): intersection, union, difference, xor
 *
 * @author Alex Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).martinez={})}(this,(function(t){"use strict";function e(t,e){return t>e?1:t<e?-1:0}var r=function(t,r){void 0===t&&(t=e),void 0===r&&(r=!1),this._compare=t,this._root=null,this._size=0,this._noDuplicates=!!r},n={size:{configurable:!0}};function i(t,e,r,n,o){var h=o-n;if(h>0){var u=n+Math.floor(h/2),s={key:e[u],data:r[u],parent:t};return s.left=i(s,e,r,n,u),s.right=i(s,e,r,u+1,o),s}return null}function o(t,e,r,n,i){if(!(r>=n)){for(var h=t[r+n>>1],u=r-1,s=n+1;;){do{u++}while(i(t[u],h)<0);do{s--}while(i(t[s],h)>0);if(u>=s)break;var p=t[u];t[u]=t[s],t[s]=p,p=e[u],e[u]=e[s],e[s]=p}o(t,e,r,s,i),o(t,e,s+1,n,i)}}r.prototype.rotateLeft=function(t){var e=t.right;e&&(t.right=e.left,e.left&&(e.left.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.left=t),t.parent=e},r.prototype.rotateRight=function(t){var e=t.left;e&&(t.left=e.right,e.right&&(e.right.parent=t),e.parent=t.parent),t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.right=t),t.parent=e},r.prototype._splay=function(t){for(;t.parent;){var e=t.parent;e.parent?e.left===t&&e.parent.left===e?(this.rotateRight(e.parent),this.rotateRight(e)):e.right===t&&e.parent.right===e?(this.rotateLeft(e.parent),this.rotateLeft(e)):e.left===t&&e.parent.right===e?(this.rotateRight(e),this.rotateLeft(e)):(this.rotateLeft(e),this.rotateRight(e)):e.left===t?this.rotateRight(e):this.rotateLeft(e)}},r.prototype.splay=function(t){for(var e,r,n,i,o;t.parent;)(r=(e=t.parent).parent)&&r.parent?((n=r.parent).left===r?n.left=t:n.right=t,t.parent=n):(t.parent=null,this._root=t),i=t.left,o=t.right,t===e.left?(r&&(r.left===e?(e.right?(r.left=e.right,r.left.parent=r):r.left=null,e.right=r,r.parent=e):(i?(r.right=i,i.parent=r):r.right=null,t.left=r,r.parent=t)),o?(e.left=o,o.parent=e):e.left=null,t.right=e,e.parent=t):(r&&(r.right===e?(e.left?(r.right=e.left,r.right.parent=r):r.right=null,e.left=r,r.parent=e):(o?(r.left=o,o.parent=r):r.left=null,t.right=r,r.parent=t)),i?(e.right=i,i.parent=e):e.right=null,t.left=e,e.parent=t)},r.prototype.replace=function(t,e){t.parent?t===t.parent.left?t.parent.left=e:t.parent.right=e:this._root=e,e&&(e.parent=t.parent)},r.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},r.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},r.prototype.insert=function(t,e){var r=this._root,n=null,i=this._compare;if(this._noDuplicates)for(;r;){if(n=r,0===i(r.key,t))return;r=i(r.key,t)<0?r.right:r.left}else for(;r;)n=r,r=i(r.key,t)<0?r.right:r.left;return r={key:t,data:e,left:null,right:null,parent:n},n?i(n.key,r.key)<0?n.right=r:n.left=r:this._root=r,this.splay(r),this._size++,r},r.prototype.find=function(t){for(var e=this._root,r=this._compare;e;){var n=r(e.key,t);if(n<0)e=e.right;else{if(!(n>0))return e;e=e.left}}return null},r.prototype.contains=function(t){for(var e=this._root,r=this._compare;e;){var n=r(t,e.key);if(0===n)return!0;e=n<0?e.left:e.right}return!1},r.prototype.remove=function(t){var e=this.find(t);if(!e)return!1;if(this.splay(e),e.left)if(e.right){var r=this.minNode(e.right);r.parent!==e&&(this.replace(r,r.right),r.right=e.right,r.right.parent=r),this.replace(e,r),r.left=e.left,r.left.parent=r}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0},r.prototype.removeNode=function(t){if(!t)return!1;if(this.splay(t),t.left)if(t.right){var e=this.minNode(t.right);e.parent!==t&&(this.replace(e,e.right),e.right=t.right,e.right.parent=e),this.replace(t,e),e.left=t.left,e.left.parent=e}else this.replace(t,t.left);else this.replace(t,t.right);return this._size--,!0},r.prototype.erase=function(t){var e=this.find(t);if(e){this.splay(e);var r=e.left,n=e.right,i=null;r&&(r.parent=null,i=this.maxNode(r),this.splay(i),this._root=i),n&&(r?i.right=n:this._root=n,n.parent=i),this._size--}},r.prototype.pop=function(){var t=this._root,e=null;if(t){for(;t.left;)t=t.left;e={key:t.key,data:t.data},this.remove(t.key)}return e},r.prototype.next=function(t){var e=t;if(e)if(e.right)for(e=e.right;e&&e.left;)e=e.left;else for(e=t.parent;e&&e.right===t;)t=e,e=e.parent;return e},r.prototype.prev=function(t){var e=t;if(e)if(e.left)for(e=e.left;e&&e.right;)e=e.right;else for(e=t.parent;e&&e.left===t;)t=e,e=e.parent;return e},r.prototype.forEach=function(t){for(var e=this._root,r=[],n=!1,i=0;!n;)e?(r.push(e),e=e.left):r.length>0?(t(e=r.pop(),i++),e=e.right):n=!0;return this},r.prototype.range=function(t,e,r,n){for(var i=[],o=this._compare,h=this._root;0!==i.length||h;)if(h)i.push(h),h=h.left;else{if(o((h=i.pop()).key,e)>0)break;if(o(h.key,t)>=0&&r.call(n,h))return this;h=h.right}return this},r.prototype.keys=function(){for(var t=this._root,e=[],r=[],n=!1;!n;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),r.push(t.key),t=t.right):n=!0;return r},r.prototype.values=function(){for(var t=this._root,e=[],r=[],n=!1;!n;)t?(e.push(t),t=t.left):e.length>0?(t=e.pop(),r.push(t.data),t=t.right):n=!0;return r},r.prototype.at=function(t){for(var e=this._root,r=[],n=!1,i=0;!n;)if(e)r.push(e),e=e.left;else if(r.length>0){if(e=r.pop(),i===t)return e;i++,e=e.right}else n=!0;return null},r.prototype.load=function(t,e,r){if(void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===r&&(r=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var n=t.length;return r&&o(t,e,0,n-1,this._compare),this._root=i(null,t,e,0,n),this._size=n,this},r.prototype.min=function(){var t=this.minNode(this._root);return t?t.key:null},r.prototype.max=function(){var t=this.maxNode(this._root);return t?t.key:null},r.prototype.isEmpty=function(){return null===this._root},n.size.get=function(){return this._size},r.createTree=function(t,e,n,i,o){return new r(n,o).load(t,e,i)},Object.defineProperties(r.prototype,n);function h(t,e,r){null===e?(t.inOut=!1,t.otherInOut=!0):(t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!u(e,r)||e.isVertical()?e.prevInResult:e));var n=u(t,r);t.resultTransition=n?function(t,e){var r,n=!t.inOut,i=!t.otherInOut;switch(e){case 0:r=n&&i;break;case 1:r=n||i;break;case 3:r=n^i;break;case 2:r=t.isSubject?n&&!i:i&&!n}return r?1:-1}(t,r):0}function u(t,e){switch(t.type){case 0:switch(e){case 0:return!t.otherInOut;case 1:return t.otherInOut;case 2:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case 3:return!0}break;case 2:return 0===e||1===e;case 3:return 2===e;case 1:return!1}return!1}var s=function(t,e,r,n,i){this.left=e,this.point=t,this.otherEvent=r,this.isSubject=n,this.type=i||0,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0},p={inResult:{configurable:!0}};function f(t,e){return t[0]===e[0]&&t[1]===e[1]}s.prototype.isBelow=function(t){var e=this.point,r=this.otherEvent.point;return this.left?(e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1])>0:(r[0]-t[0])*(e[1]-t[1])-(e[0]-t[0])*(r[1]-t[1])>0},s.prototype.isAbove=function(t){return!this.isBelow(t)},s.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},p.inResult.get=function(){return 0!==this.resultTransition},s.prototype.clone=function(){var t=new s(this.point,this.left,this.otherEvent,this.isSubject,this.type);return t.contourId=this.contourId,t.resultTransition=this.resultTransition,t.prevInResult=this.prevInResult,t.isExteriorRing=this.isExteriorRing,t.inOut=this.inOut,t.otherInOut=this.otherInOut,t},Object.defineProperties(s.prototype,p);var l=134217729;function a(t,e,r,n,i){var o,h,u,s,p=e[0],f=n[0],l=0,a=0;f>p==f>-p?(o=p,p=e[++l]):(o=f,f=n[++a]);var c=0;if(l<t&&a<r)for(f>p==f>-p?(u=o-((h=p+o)-p),p=e[++l]):(u=o-((h=f+o)-f),f=n[++a]),o=h,0!==u&&(i[c++]=u);l<t&&a<r;)f>p==f>-p?(u=o-((h=o+p)-(s=h-o))+(p-s),p=e[++l]):(u=o-((h=o+f)-(s=h-o))+(f-s),f=n[++a]),o=h,0!==u&&(i[c++]=u);for(;l<t;)u=o-((h=o+p)-(s=h-o))+(p-s),p=e[++l],o=h,0!==u&&(i[c++]=u);for(;a<r;)u=o-((h=o+f)-(s=h-o))+(f-s),f=n[++a],o=h,0!==u&&(i[c++]=u);return 0===o&&0!==c||(i[c++]=o),c}function c(t){return new Float64Array(t)}var v=c(4),g=c(8),d=c(12),y=c(16),E=c(4);function _(t,e,r,n,i,o){var h=(e-o)*(r-i),u=(t-i)*(n-o),s=h-u;if(0===h||0===u||h>0!=u>0)return s;var p=Math.abs(h+u);return Math.abs(s)>=33306690738754716e-32*p?s:-function(t,e,r,n,i,o,h){var u,s,p,f,c,_,I,b,O,k,m,w,R,j,x,S,N,z,M=t-i,P=r-i,T=e-o,L=n-o;c=(x=(b=M-(I=(_=l*M)-(_-M)))*(k=L-(O=(_=l*L)-(_-L)))-((j=M*L)-I*O-b*O-I*k))-(m=x-(N=(b=T-(I=(_=l*T)-(_-T)))*(k=P-(O=(_=l*P)-(_-P)))-((S=T*P)-I*O-b*O-I*k))),v[0]=x-(m+c)+(c-N),c=(R=j-((w=j+m)-(c=w-j))+(m-c))-(m=R-S),v[1]=R-(m+c)+(c-S),c=(z=w+m)-w,v[2]=w-(z-c)+(m-c),v[3]=z;var B=function(t,e){for(var r=e[0],n=1;n<t;n++)r+=e[n];return r}(4,v),C=22204460492503146e-32*h;if(B>=C||-B>=C)return B;if(u=t-(M+(c=t-M))+(c-i),p=r-(P+(c=r-P))+(c-i),s=e-(T+(c=e-T))+(c-o),f=n-(L+(c=n-L))+(c-o),0===u&&0===s&&0===p&&0===f)return B;if(C=11093356479670487e-47*h+33306690738754706e-32*Math.abs(B),(B+=M*f+L*u-(T*p+P*s))>=C||-B>=C)return B;c=(x=(b=u-(I=(_=l*u)-(_-u)))*(k=L-(O=(_=l*L)-(_-L)))-((j=u*L)-I*O-b*O-I*k))-(m=x-(N=(b=s-(I=(_=l*s)-(_-s)))*(k=P-(O=(_=l*P)-(_-P)))-((S=s*P)-I*O-b*O-I*k))),E[0]=x-(m+c)+(c-N),c=(R=j-((w=j+m)-(c=w-j))+(m-c))-(m=R-S),E[1]=R-(m+c)+(c-S),c=(z=w+m)-w,E[2]=w-(z-c)+(m-c),E[3]=z;var A=a(4,v,4,E,g);c=(x=(b=M-(I=(_=l*M)-(_-M)))*(k=f-(O=(_=l*f)-(_-f)))-((j=M*f)-I*O-b*O-I*k))-(m=x-(N=(b=T-(I=(_=l*T)-(_-T)))*(k=p-(O=(_=l*p)-(_-p)))-((S=T*p)-I*O-b*O-I*k))),E[0]=x-(m+c)+(c-N),c=(R=j-((w=j+m)-(c=w-j))+(m-c))-(m=R-S),E[1]=R-(m+c)+(c-S),c=(z=w+m)-w,E[2]=w-(z-c)+(m-c),E[3]=z;var D=a(A,g,4,E,d);c=(x=(b=u-(I=(_=l*u)-(_-u)))*(k=f-(O=(_=l*f)-(_-f)))-((j=u*f)-I*O-b*O-I*k))-(m=x-(N=(b=s-(I=(_=l*s)-(_-s)))*(k=p-(O=(_=l*p)-(_-p)))-((S=s*p)-I*O-b*O-I*k))),E[0]=x-(m+c)+(c-N),c=(R=j-((w=j+m)-(c=w-j))+(m-c))-(m=R-S),E[1]=R-(m+c)+(c-S),c=(z=w+m)-w,E[2]=w-(z-c)+(m-c),E[3]=z;var F=a(D,d,4,E,y);return y[F-1]}(t,e,r,n,i,o,p)}function I(t,e,r){var n=_(t[0],t[1],e[0],e[1],r[0],r[1]);return n>0?-1:n<0?1:0}function b(t,e){var r=t.point,n=e.point;return r[0]>n[0]?1:r[0]<n[0]?-1:r[1]!==n[1]?r[1]>n[1]?1:-1:function(t,e,r,n){if(t.left!==e.left)return t.left?1:-1;if(0!==I(r,t.otherEvent.point,e.otherEvent.point))return t.isBelow(e.otherEvent.point)?-1:1;return!t.isSubject&&e.isSubject?1:-1}(t,e,r)}function O(t,e,r){var n=new s(e,!1,t,t.isSubject),i=new s(e,!0,t.otherEvent,t.isSubject);return f(t.point,t.otherEvent.point)&&console.warn("what is that, a collapsed segment?",t),n.contourId=i.contourId=t.contourId,b(i,t.otherEvent)>0&&(t.otherEvent.left=!0,i.left=!1),t.otherEvent.otherEvent=i,t.otherEvent=n,r.push(i),r.push(n),r}function k(t,e){return t[0]*e[1]-t[1]*e[0]}function m(t,e){return t[0]*e[0]+t[1]*e[1]}function w(t,e,r){var n=function(t,e,r,n,i){var o=[e[0]-t[0],e[1]-t[1]],h=[n[0]-r[0],n[1]-r[1]];function u(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}var s=[r[0]-t[0],r[1]-t[1]],p=k(o,h),f=p*p,l=m(o,o);if(f>0){var a=k(s,h)/p;if(a<0||a>1)return null;var c=k(s,o)/p;return c<0||c>1?null:0===a||1===a?i?null:[u(t,a,o)]:0===c||1===c?i?null:[u(r,c,h)]:[u(t,a,o)]}if((f=(p=k(s,o))*p)>0)return null;var v=m(o,s)/l,g=v+m(o,h)/l,d=Math.min(v,g),y=Math.max(v,g);return d<=1&&y>=0?1===d?i?null:[u(t,d>0?d:0,o)]:0===y?i?null:[u(t,y<1?y:1,o)]:i&&0===d&&1===y?null:[u(t,d>0?d:0,o),u(t,y<1?y:1,o)]:null}(t.point,t.otherEvent.point,e.point,e.otherEvent.point),i=n?n.length:0;if(0===i)return 0;if(1===i&&(f(t.point,e.point)||f(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===i&&t.isSubject===e.isSubject)return 0;if(1===i)return f(t.point,n[0])||f(t.otherEvent.point,n[0])||O(t,n[0],r),f(e.point,n[0])||f(e.otherEvent.point,n[0])||O(e,n[0],r),1;var o=[],h=!1,u=!1;return f(t.point,e.point)?h=!0:1===b(t,e)?o.push(e,t):o.push(t,e),f(t.otherEvent.point,e.otherEvent.point)?u=!0:1===b(t.otherEvent,e.otherEvent)?o.push(e.otherEvent,t.otherEvent):o.push(t.otherEvent,e.otherEvent),h&&u||h?(e.type=1,t.type=e.inOut===t.inOut?2:3,h&&!u&&O(o[1].otherEvent,o[0].point,r),2):u?(O(o[0],o[1].point,r),3):o[0]!==o[3].otherEvent?(O(o[0],o[1].point,r),O(o[1],o[2].point,r),3):(O(o[0],o[1].point,r),O(o[3].otherEvent,o[2].point,r),3)}function R(t,e){if(t===e)return 0;if(0!==I(t.point,t.otherEvent.point,e.point)||0!==I(t.point,t.otherEvent.point,e.otherEvent.point))return f(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===b(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1;if(t.isSubject!==e.isSubject)return t.isSubject?-1:1;var r=t.point,n=e.point;return r[0]===n[0]&&r[1]===n[1]?(r=t.otherEvent.point,n=e.otherEvent.point,r[0]===n[0]&&r[1]===n[1]?0:t.contourId>e.contourId?1:-1):1===b(t,e)?1:-1}var j=function(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null};function x(t,e,r,n){var i,o=t+1,h=e[t].point,u=e.length;for(o<u&&(i=e[o].point);o<u&&i[0]===h[0]&&i[1]===h[1];){if(!r[o])return o;i=e[++o].point}for(o=t-1;r[o]&&o>n;)o--;return o}function S(t){var e,r,n=function(t){var e,r,n,i,o=[];for(r=0,n=t.length;r<n;r++)((e=t[r]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&o.push(e);for(var h=!1;!h;)for(h=!0,r=0,n=o.length;r<n;r++)r+1<n&&1===b(o[r],o[r+1])&&(i=o[r],o[r]=o[r+1],o[r+1]=i,h=!1);for(r=0,n=o.length;r<n;r++)(e=o[r]).otherPos=r;for(r=0,n=o.length;r<n;r++)(e=o[r]).left||(i=e.otherPos,e.otherPos=e.otherEvent.otherPos,e.otherEvent.otherPos=i);return o}(t),i={},o=[],h=function(){if(!i[e]){var t=o.length,r=function(t,e,r){var n=new j;if(null!=t.prevInResult){var i=t.prevInResult,o=i.outputContourId;if(i.resultTransition>0){var h=e[o];if(null!=h.holeOf){var u=h.holeOf;e[u].holeIds.push(r),n.holeOf=u,n.depth=e[o].depth}else e[o].holeIds.push(r),n.holeOf=o,n.depth=e[o].depth+1}else n.holeOf=null,n.depth=e[o].depth}else n.holeOf=null,n.depth=0;return n}(n[e],o,t),h=function(e){i[e]=!0,n[e].outputContourId=t},u=e,s=e,p=n[e].point;for(r.points.push(p);h(u),h(u=n[u].otherPos),r.points.push(n[u].point),(u=x(u,n,i,s))!=s;);o.push(r)}};for(e=0,r=n.length;e<r;e++)h();return o}j.prototype.isExterior=function(){return null==this.holeOf};var N=M,z=M;function M(t,e){if(!(this instanceof M))return new M(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||P,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}function P(t,e){return t<e?-1:t>e?1:0}M.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare,n=e[t];t>0;){var i=t-1>>1,o=e[i];if(r(n,o)>=0)break;e[t]=o,t=i}e[t]=n},_down:function(t){for(var e=this.data,r=this.compare,n=this.length>>1,i=e[t];t<n;){var o=1+(t<<1),h=o+1,u=e[o];if(h<this.length&&r(e[h],u)<0&&(o=h,u=e[h]),r(u,i)>=0)break;e[t]=u,t=o}e[t]=i}},N.default=z;var T=Math.max,L=Math.min,B=0;function C(t,e,r,n,i,o){var h,u,p,f,l,a;for(h=0,u=t.length-1;h<u;h++)if(p=t[h],f=t[h+1],l=new s(p,!1,void 0,e),a=new s(f,!1,l,e),l.otherEvent=a,p[0]!==f[0]||p[1]!==f[1]){l.contourId=a.contourId=r,o||(l.isExteriorRing=!1,a.isExteriorRing=!1),b(l,a)>0?a.left=!0:l.left=!0;var c=p[0],v=p[1];i[0]=L(i[0],c),i[1]=L(i[1],v),i[2]=T(i[2],c),i[3]=T(i[3],v),n.push(l),n.push(a)}}var A=[];function D(t,e,n){"number"==typeof t[0][0][0]&&(t=[t]),"number"==typeof e[0][0][0]&&(e=[e]);var i=function(t,e,r){var n=null;return t.length*e.length==0&&(0===r?n=A:2===r?n=t:1!==r&&3!==r||(n=0===t.length?e:t)),n}(t,e,n);if(i)return i===A?null:i;var o=[1/0,1/0,-1/0,-1/0],u=[1/0,1/0,-1/0,-1/0],s=function(t,e,r,n,i){var o,h,u,s,p,f,l=new N(null,b);for(u=0,s=t.length;u<s;u++)for(p=0,f=(o=t[u]).length;p<f;p++)(h=0===p)&&B++,C(o[p],!0,B,l,r,h);for(u=0,s=e.length;u<s;u++)for(p=0,f=(o=e[u]).length;p<f;p++)h=0===p,2===i&&(h=!1),h&&B++,C(o[p],!1,B,l,n,h);return l}(t,e,o,u,n);if(i=function(t,e,r,n,i){var o=null;return(r[0]>n[2]||n[0]>r[2]||r[1]>n[3]||n[1]>r[3])&&(0===i?o=A:2===i?o=t:1!==i&&3!==i||(o=t.concat(e))),o}(t,e,o,u,n))return i===A?null:i;for(var p=S(function(t,e,n,i,o,u){for(var s,p,f,l=new r(R),a=[],c=Math.min(i[2],o[2]);0!==t.length;){var v=t.pop();if(a.push(v),0===u&&v.point[0]>c||2===u&&v.point[0]>i[2])break;if(v.left){p=s=l.insert(v),s=s!==(f=l.minNode())?l.prev(s):null,p=l.next(p);var g=s?s.key:null;if(h(v,g,u),p&&2===w(v,p.key,t)&&(h(v,g,u),h(v,p.key,u)),s&&2===w(s.key,v,t)){var d=s;h(g,(d=d!==f?l.prev(d):null)?d.key:null,u),h(v,g,u)}}else v=v.otherEvent,p=s=l.find(v),s&&p&&(s=s!==f?l.prev(s):null,p=l.next(p),l.remove(v),p&&s&&w(s.key,p.key,t))}return a}(s,0,0,o,u,n)),f=[],l=0;l<p.length;l++){var a=p[l];if(a.isExterior()){for(var c=[a.points],v=0;v<a.holeIds.length;v++){var g=a.holeIds[v];c.push(p[g].points)}f.push(c)}}return f}var F={UNION:1,DIFFERENCE:2,INTERSECTION:0,XOR:3};t.diff=function(t,e){return D(t,e,2)},t.intersection=function(t,e){return D(t,e,0)},t.operations=F,t.union=function(t,e){return D(t,e,1)},t.xor=function(t,e){return D(t,e,3)},Object.defineProperty(t,"__esModule",{value:!0})}));